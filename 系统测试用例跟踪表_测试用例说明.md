# 登录功能黑盒测试用例说明

## 测试功能说明
- **功能名称**: 登录功能
- **功能描述**: 用户通过输入用户名/学号/工号、密码和选择角色进行登录验证
- **测试范围**: 登录界面的所有功能点，包括正常登录、异常处理、界面交互等

## 测试环境说明
- **测试数据库**: counselor_student_system
- **测试数据标识**: 
  - 使用真实数据（从data.sql中获取）
  - `202383290001` - 测试学生（张三，密码：123456）
  - `223807001` - 测试辅导员（张明，密码：123456）
  - `admin` - 管理员（硬编码，密码：123321）
- **测试工具**: JavaFX应用程序（通过mvn javafx:run启动）
- **测试方式**: 手动测试
- **测试日期**: 2025-12-15

## 用例编号说明
- **编号格式**: TC + 三位数字
- **TC含义**: Test Case（测试用例）
- **编号范围**: TC001 - TC014

## 测试用例清单

### 1. 正常情况测试

#### 用例 TC001: 学生正确登录
- **用例名称**: 学生正确登录（有效学号+正确密码+选择学生角色）
- **测试类型**: 正常情况测试
- **前置条件**: 
  - 数据库中存在学号为 202383290001 的学生（从data.sql中获取）
  - 该学生的密码为 "123456"
  - 该学生的姓名为 "张三"
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认默认选中"学生"角色（界面应显示学生图标）
  4. 在用户名输入框输入学号 "202383290001"
  5. 在密码输入框输入密码 "123456"
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 学号 | 202383290001 | 从data.sql中获取的真实学号 |
| 密码 | 123456 | 对应的密码 |
| 角色 | 学生 | 选择的登录角色（默认选中） |

- **预期结果**: 
  - 显示成功提示弹窗："学生登录成功！欢迎，张三！"
  - 登录窗口关闭
  - 打开学生主界面窗口
  - 窗口标题显示："学生主界面 - 辅导员学生交流信息管理系统"
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证正常学生登录流程

#### 用例 TC002: 辅导员正确登录
- **用例名称**: 辅导员正确登录（有效工号+正确密码+选择辅导员角色）
- **测试类型**: 正常情况测试
- **前置条件**: 
  - 数据库中存在工号为 223807001 的辅导员（从data.sql中获取）
  - 该辅导员的密码为 "123456"
  - 该辅导员的姓名为 "张明"
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 点击"辅导员"角色按钮
  4. 确认界面图标切换为辅导员图标
  5. 在用户名输入框输入工号 "223807001"
  6. 在密码输入框输入密码 "123456"
  7. 点击"登录"按钮
  8. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 工号 | 223807001 | 从data.sql中获取的真实工号 |
| 密码 | 123456 | 对应的密码 |
| 角色 | 辅导员 | 选择的登录角色 |

- **预期结果**: 
  - 显示成功提示弹窗："辅导员登录成功！欢迎，张明！"
  - 登录窗口关闭
  - 打开辅导员主界面窗口
  - 窗口标题显示："辅导员主界面 - 辅导员学生交流信息管理系统"
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证正常辅导员登录流程

#### 用例 TC003: 管理员正确登录
- **用例名称**: 管理员正确登录（admin+123321+选择管理员角色）
- **测试类型**: 正常情况测试
- **前置条件**: 
  - 管理员凭据硬编码在AuthService中
  - 管理员用户名为 "admin"
  - 管理员密码为 "123321"
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 点击"管理员"角色按钮
  4. 确认界面图标切换为管理员图标
  5. 在用户名输入框输入用户名 "admin"
  6. 在密码输入框输入密码 "123321"
  7. 点击"登录"按钮
  8. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | admin | 硬编码的管理员用户名 |
| 密码 | 123321 | 硬编码的管理员密码 |
| 角色 | 管理员 | 选择的登录角色 |

- **预期结果**: 
  - 显示成功提示弹窗："管理员登录成功！"
  - 登录窗口关闭
  - 打开管理员主界面窗口
  - 窗口标题显示："管理员主界面 - 辅导员学生交流信息管理系统"
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证硬编码的管理员登录

### 2. 边界值测试

#### 用例 TC004: 用户名为空
- **用例名称**: 用户名为空
- **测试类型**: 边界情况测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
  - 已选择角色（默认学生角色）
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择角色（默认学生角色）
  4. 用户名输入框保持为空
  5. 在密码输入框输入密码 "123456"
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | （空） | 空字符串 |
| 密码 | 123456 | 任意密码 |
| 角色 | 学生 | 已选择角色 |

- **预期结果**: 
  - 显示错误提示弹窗："请选择角色并填写完整信息"
  - 登录窗口保持打开状态
  - 不跳转到主界面
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证空用户名输入验证

#### 用例 TC005: 密码为空
- **用例名称**: 密码为空
- **测试类型**: 边界情况测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
  - 已选择角色（默认学生角色）
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择角色（默认学生角色）
  4. 在用户名输入框输入学号 "202383290001"
  5. 密码输入框保持为空
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | 202383290001 | 有效学号 |
| 密码 | （空） | 空字符串 |
| 角色 | 学生 | 已选择角色 |

- **预期结果**: 
  - 显示错误提示弹窗："请选择角色并填写完整信息"
  - 登录窗口保持打开状态
  - 不跳转到主界面
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证空密码输入验证

#### 用例 TC006: 用户名超长（50个字符）
- **用例名称**: 用户名超长（50个字符）
- **测试类型**: 边界情况测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
  - 已选择角色（默认学生角色）
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择角色（默认学生角色）
  4. 在用户名输入框输入50个字符的字符串（例如："12345678901234567890123456789012345678901234567890"）
  5. 在密码输入框输入密码 "123456"
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | 12345678901234567890123456789012345678901234567890 | 50个字符的超长字符串 |
| 密码 | 123456 | 任意密码 |
| 角色 | 学生 | 已选择角色 |

- **预期结果**: 
  - 显示错误提示弹窗："账号或密码错误，还剩 2 次尝试机会"（因为超长用户名不存在）
  - 登录窗口保持打开状态
  - 不跳转到主界面
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证超长用户名处理

#### 用例 TC007: 密码超长（100个字符）
- **用例名称**: 密码超长（100个字符）
- **测试类型**: 边界情况测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
  - 已选择角色（默认学生角色）
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择角色（默认学生角色）
  4. 在用户名输入框输入学号 "202383290001"
  5. 在密码输入框输入100个字符的字符串（例如："1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890"）
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | 202383290001 | 有效学号 |
| 密码 | 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 | 100个字符的超长字符串 |
| 角色 | 学生 | 已选择角色 |

- **预期结果**: 
  - 显示错误提示弹窗："账号或密码错误，还剩 2 次尝试机会"（因为超长密码不正确）
  - 登录窗口保持打开状态
  - 不跳转到主界面
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证超长密码处理

#### 用例 TC008: 未选择角色
- **用例名称**: 未选择角色
- **测试类型**: 边界情况测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
  - 注意：根据代码，默认会选中学生角色，此用例需要验证如果角色被取消选择的情况
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 注意：由于代码中默认选中学生角色，此用例主要验证角色选择逻辑
  4. 在用户名输入框输入学号 "202383290001"
  5. 在密码输入框输入密码 "123456"
  6. 尝试取消选择角色（如果可能）
  7. 点击"登录"按钮
  8. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | 202383290001 | 有效学号 |
| 密码 | 123456 | 有效密码 |
| 角色 | （未选择） | 未选择任何角色 |

- **预期结果**: 
  - 如果角色可以取消选择：显示错误提示弹窗："请选择角色并填写完整信息"
  - 如果角色不能取消选择：正常登录（因为默认选中学生角色）
  - 登录窗口保持打开状态（如果验证失败）
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证角色选择验证逻辑

### 3. 错误情况测试

#### 用例 TC009: 错误密码（正确学号+错误密码）
- **用例名称**: 错误密码（正确学号+错误密码）
- **测试类型**: 异常情况测试
- **前置条件**: 
  - 数据库中存在学号为 202383290001 的学生
  - 该学生的正确密码为 "123456"
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择"学生"角色
  4. 在用户名输入框输入学号 "202383290001"
  5. 在密码输入框输入错误密码 "wrong123"
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | 202383290001 | 有效学号（正确） |
| 密码 | wrong123 | 错误密码 |
| 角色 | 学生 | 已选择角色 |

- **预期结果**: 
  - 显示错误提示弹窗："账号或密码错误，还剩 2 次尝试机会"
  - 登录窗口保持打开状态
  - 不跳转到主界面
  - 登录尝试次数减少1次
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证密码错误处理

#### 用例 TC010: 不存在的用户（不存在的学号+任意密码）
- **用例名称**: 不存在的用户（不存在的学号+任意密码）
- **测试类型**: 异常情况测试
- **前置条件**: 
  - 数据库中不存在学号为 TEST999999 的学生
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择"学生"角色
  4. 在用户名输入框输入不存在的学号 "TEST999999"
  5. 在密码输入框输入任意密码 "123456"
  6. 点击"登录"按钮
  7. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | TEST999999 | 不存在的学号 |
| 密码 | 123456 | 任意密码 |
| 角色 | 学生 | 已选择角色 |

- **预期结果**: 
  - 显示错误提示弹窗："账号或密码错误，还剩 2 次尝试机会"
  - 登录窗口保持打开状态
  - 不跳转到主界面
  - 登录尝试次数减少1次
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证不存在用户处理

#### 用例 TC011: 角色选择错误（学生学号+学生密码+选择辅导员角色）
- **用例名称**: 角色选择错误（学生学号+学生密码+选择辅导员角色）
- **测试类型**: 异常情况测试
- **前置条件**: 
  - 数据库中存在学号为 202383290001 的学生
  - 该学生的密码为 "123456"
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 点击"辅导员"角色按钮
  4. 确认界面图标切换为辅导员图标
  5. 在用户名输入框输入学生学号 "202383290001"
  6. 在密码输入框输入学生密码 "123456"
  7. 点击"登录"按钮
  8. 观察系统响应
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 用户名 | 202383290001 | 学生学号（正确） |
| 密码 | 123456 | 学生密码（正确） |
| 角色 | 辅导员 | 错误的角色选择 |

- **预期结果**: 
  - 显示错误提示弹窗："账号或密码错误，还剩 2 次尝试机会"（因为学生学号在辅导员角色下不存在）
  - 登录窗口保持打开状态
  - 不跳转到主界面
  - 登录尝试次数减少1次
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证角色选择错误处理

#### 用例 TC012: 连续3次错误登录（验证锁定机制）
- **用例名称**: 连续3次错误登录（验证锁定机制）
- **测试类型**: 异常情况测试
- **前置条件**: 
  - 数据库中存在学号为 202383290001 的学生
  - 该学生的正确密码为 "123456"
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认已选择"学生"角色
  4. 第1次错误登录：
     - 在用户名输入框输入学号 "202383290001"
     - 在密码输入框输入错误密码 "wrong1"
     - 点击"登录"按钮
     - 观察错误提示："账号或密码错误，还剩 2 次尝试机会"
  5. 第2次错误登录：
     - 保持用户名和角色不变
     - 在密码输入框输入错误密码 "wrong2"
     - 点击"登录"按钮
     - 观察错误提示："账号或密码错误，还剩 1 次尝试机会"
  6. 第3次错误登录：
     - 保持用户名和角色不变
     - 在密码输入框输入错误密码 "wrong3"
     - 点击"登录"按钮
     - 观察系统响应
- **输入数据**:

| 尝试次数 | 用户名 | 密码 | 角色 | 说明 |
|---------|--------|------|------|------|
| 第1次 | 202383290001 | wrong1 | 学生 | 错误密码 |
| 第2次 | 202383290001 | wrong2 | 学生 | 错误密码 |
| 第3次 | 202383290001 | wrong3 | 学生 | 错误密码 |

- **预期结果**: 
  - 第1次：显示错误提示："账号或密码错误，还剩 2 次尝试机会"
  - 第2次：显示错误提示："账号或密码错误，还剩 1 次尝试机会"
  - 第3次：显示错误提示："超过最大尝试次数，程序将关闭"
  - 登录窗口自动关闭
  - 程序退出
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证登录次数限制机制

### 4. 界面交互测试

#### 用例 TC013: 密码显示/隐藏切换
- **用例名称**: 密码显示/隐藏切换
- **测试类型**: 界面交互测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认密码输入框默认显示为密码框（隐藏状态）
  4. 在密码输入框输入密码 "123456"
  5. 确认密码显示为星号或圆点（隐藏状态）
  6. 点击密码显示/隐藏图标（眼睛图标）
  7. 观察密码输入框变化
  8. 再次点击密码显示/隐藏图标
  9. 观察密码输入框变化
- **输入数据**:

| 字段名 | 字段值 | 说明 |
|--------|--------|------|
| 密码 | 123456 | 测试密码 |

- **预期结果**: 
  - 初始状态：密码输入框为PasswordField类型，密码显示为星号或圆点
  - 点击显示图标后：密码输入框切换为TextField类型，密码明文显示 "123456"
  - 图标切换为"隐藏"图标（眼睛睁开）
  - 再次点击隐藏图标后：密码输入框切换回PasswordField类型，密码显示为星号或圆点
  - 图标切换为"显示"图标（眼睛闭合）
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证密码显示/隐藏功能

#### 用例 TC014: 角色按钮切换
- **用例名称**: 角色按钮切换
- **测试类型**: 界面交互测试
- **前置条件**: 
  - 应用程序已启动，显示登录界面
- **测试步骤**:
  1. 启动应用程序（mvn javafx:run）
  2. 确认登录界面正常显示
  3. 确认默认选中"学生"角色按钮（有选中样式）
  4. 确认用户名图标显示为学生图标
  5. 点击"辅导员"角色按钮
  6. 观察按钮样式变化和图标变化
  7. 点击"管理员"角色按钮
  8. 观察按钮样式变化和图标变化
  9. 再次点击"学生"角色按钮
  10. 观察按钮样式变化和图标变化
- **输入数据**: 无（仅界面交互）

- **预期结果**: 
  - 初始状态：学生角色按钮有选中样式，用户名图标为学生图标
  - 点击辅导员按钮后：
    - 学生角色按钮取消选中样式
    - 辅导员角色按钮显示选中样式
    - 用户名图标切换为辅导员图标（教师图标）
  - 点击管理员按钮后：
    - 辅导员角色按钮取消选中样式
    - 管理员角色按钮显示选中样式
    - 用户名图标切换为管理员图标
  - 再次点击学生按钮后：
    - 管理员角色按钮取消选中样式
    - 学生角色按钮显示选中样式
    - 用户名图标切换回学生图标
- **实际结果**: （测试后填写）
- **测试状态**: （测试后填写：通过/失败/阻塞）
- **备注**: 验证角色按钮切换功能

## 测试总结

### 测试结果统计
- **总测试用例数**: 14
- **通过**: （测试后填写）
- **失败**: （测试后填写）
- **阻塞**: （测试后填写）
- **跳过**: （测试后填写）
- **通过率**: （测试后填写）%

### 测试覆盖场景
- ✅ **正常情况测试**: 3个用例（TC001-TC003）
  - 学生登录成功
  - 辅导员登录成功
  - 管理员登录成功
- ✅ **边界情况测试**: 5个用例（TC004-TC008）
  - 用户名为空
  - 密码为空
  - 用户名超长
  - 密码超长
  - 未选择角色
- ✅ **异常情况测试**: 4个用例（TC009-TC012）
  - 错误密码
  - 不存在的用户
  - 角色选择错误
  - 连续3次错误登录
- ✅ **界面交互测试**: 2个用例（TC013-TC014）
  - 密码显示/隐藏切换
  - 角色按钮切换

### 发现的问题
- （测试后填写）

### 改进建议
- （测试后填写）

## 附录

### 真实数据参考
测试使用的真实数据来自data.sql：

| 字段名 | 真实数据示例 | 说明 |
|--------|------------|------|
| 学号 | 202383290001 | 2023级计算机科学与技术专业学生（张三） |
| 密码 | 123456 | 默认密码 |
| 工号 | 223807001 | 辅导员工号（张明） |
| 密码 | 123456 | 默认密码 |
| 管理员用户名 | admin | 硬编码 |
| 管理员密码 | 123321 | 硬编码 |

### 测试截图说明
- 每个测试用例应包含以下截图（如果适用）：
  - 登录界面初始状态
  - 输入数据后的界面状态
  - 成功/错误提示弹窗
  - 登录后的主界面（如果登录成功）
- 截图应清晰显示关键信息，如错误提示内容、界面元素状态等

### Bug记录格式
如果发现Bug，请按以下格式记录：

**Bug编号**: BUG001
**Bug描述**: （详细描述Bug现象）
**复现步骤**: 
1. （步骤1）
2. （步骤2）
...
**预期行为**: （描述预期应该发生什么）
**实际行为**: （描述实际发生了什么）
**截图/日志**: （附上相关截图或日志）
**严重程度**: （严重/一般/轻微）
**优先级**: （高/中/低）

